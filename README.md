# üìä Finean - Optimizaci√≥n de Portafolios de Inversi√≥n

Biblioteca Python profesional para optimizaci√≥n de portafolios con **datos reales del mercado**.

[![Python](https://img.shields.io/badge/Python-3.8%2B-blue)](https://www.python.org/)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)

---

## üìë √çndice

- [üöÄ Inicio R√°pido](#-inicio-r√°pido)
- [üìÇ Scripts Disponibles](#-scripts-disponibles)
- [üéØ Ejemplos Pr√°cticos](#-ejemplos-pr√°cticos)
- [‚öôÔ∏è Configuraci√≥n](#Ô∏è-configuraci√≥n)
- [üìä Interpretaci√≥n de Resultados](#-interpretaci√≥n-de-resultados)
- [üîß API Python](#-api-python)
- [üí° Tips y Buenas Pr√°cticas](#-tips-y-buenas-pr√°cticas)
- [‚ùì FAQ](#-faq)
- [üìö Recursos](#-recursos)

---

## üöÄ Inicio R√°pido

### 3 Pasos para Empezar

```bash
# 1. Instalar dependencias
pip install -r requirements.txt

# 2. Ejecutar optimizaci√≥n
python main.py

# 3. ¬°Ver resultados!
```

### Resultado Esperado

```
RESULTADOS DE LA OPTIMIZACI√ìN
======================================================================
Pesos √ìptimos del Portafolio:
  WMT     :  39.28% ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
  JPM     :  31.90% ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
  JNJ     :  14.66% ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà
  GOOGL   :  12.42% ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà

M√©tricas del Portafolio √ìptimo:
  Retorno Esperado:    35.48% anual
  Volatilidad:         15.05% anual
  Ratio de Sharpe:      2.09  ‚≠ê Excelente
```

---

## üìÇ Scripts Disponibles

| Script | Nivel | Descripci√≥n | Uso |
|--------|-------|-------------|-----|
| `main.py` | ‚≠ê B√°sico | Optimizaci√≥n M√°ximo Sharpe | `python main.py` |
| `main_advanced.py` | ‚≠ê‚≠ê Intermedio | Comparar estrategias | `python main_advanced.py` |
| `main_interactive.py` | ‚≠ê‚≠ê‚≠ê Flexible | Modo interactivo | `python main_interactive.py` |
| `demo.py` | üéì Demo | M√∫ltiples ejemplos | `python demo.py` |

### ¬øCu√°l Script Usar?

- **Primera vez?** ‚Üí `main.py`
- **Quieres comparar estrategias?** ‚Üí `main_advanced.py`
- **Quieres cambiar par√°metros sin editar c√≥digo?** ‚Üí `main_interactive.py`
- **Quieres ver varios ejemplos?** ‚Üí `demo.py`

---

## üéØ Ejemplos Pr√°cticos

### Ejemplo 1: Tech Giants üñ•Ô∏è

```python
# Edita main.py
TICKERS = ['AAPL', 'MSFT', 'GOOGL', 'NVDA', 'META']
```

**Resultado t√≠pico:**
- Retorno: ~40% anual
- Volatilidad: ~28% anual
- Sharpe: ~1.3 (Bueno)

### Ejemplo 2: Portafolio Cl√°sico (Oro + Acciones + Bonos) üèÜ

```python
TICKERS = [
    'GLD',   # Oro (cobertura)
    'SPY',   # S&P 500 (crecimiento)
    'BIL',   # Bonos (estabilidad)
]
```

**Resultado t√≠pico:**
- Retorno: ~13% anual
- Volatilidad: ~12% anual
- Sharpe: ~0.8 (Conservador pero estable)

### Ejemplo 3: ETFs Diversificados üìà

```python
TICKERS = ['SPY', 'QQQ', 'VTI', 'AGG', 'GLD']
```

### Ejemplo 4: Mix por Sectores üè≠

```python
TICKERS = [
    'AAPL',  # Tech
    'JPM',   # Finanzas
    'JNJ',   # Salud
    'XOM',   # Energ√≠a
    'WMT',   # Consumo
]
```

---

## ‚öôÔ∏è Configuraci√≥n

### Cambiar Activos

Edita la lista `TICKERS` en cualquier script:

```python
TICKERS = ['AAPL', 'MSFT', 'GOOGL']  # Tus tickers aqu√≠
```

**Tipos soportados:**
- ‚úÖ Acciones: `AAPL`, `MSFT`, `TSLA`
- ‚úÖ ETFs: `SPY`, `QQQ`, `VTI`
- ‚úÖ Criptos: `BTC-USD`, `ETH-USD`
- ‚úÖ Divisas: `EURUSD=X`
- ‚úÖ √çndices: `^GSPC`, `^DJI`

### Periodo de Datos

```python
PERIOD = '2y'   # 2 a√±os (recomendado)
PERIOD = '5y'   # 5 a√±os (mejor)
PERIOD = 'max'  # M√°ximo disponible
```

### Tasa Libre de Riesgo

```python
RISK_FREE_RATE = 0.04  # 4% anual (bonos del tesoro USA)
```

### Restricciones de Peso

```python
MIN_WEIGHT = 0.0   # M√≠nimo por activo (0 = puede ser 0%)
MAX_WEIGHT = 0.40  # M√°ximo por activo (0.4 = m√°ximo 40%)
```

---

## üìä Interpretaci√≥n de Resultados

### Ratio de Sharpe

**¬øQu√© mide?** Retorno ajustado por riesgo.

| Valor | Calificaci√≥n | Significado |
|-------|--------------|-------------|
| < 1.0 | ‚ùå Malo | Bajo retorno por riesgo tomado |
| 1.0-1.5 | ‚ö†Ô∏è Aceptable | Retorno decente por el riesgo |
| 1.5-2.0 | ‚úÖ Bueno | Buen balance riesgo-retorno |
| > 2.0 | ‚≠ê Excelente | Muy buen retorno ajustado |

**F√≥rmula:** `(Retorno - Tasa Libre de Riesgo) / Volatilidad`

### Volatilidad (Riesgo)

**¬øQu√© mide?** Cu√°nto var√≠a el precio (a mayor volatilidad, mayor riesgo).

| Rango | Tipo | Ejemplos |
|-------|------|----------|
| < 10% | Muy bajo | Bonos, activos estables |
| 10-20% | Moderado | Portafolios diversificados |
| 20-30% | Alto | Acciones vol√°tiles |
| > 30% | Muy alto | Crypto, especulativas |

### Retorno Esperado

Promedio anualizado de datos hist√≥ricos.

‚ö†Ô∏è **Importante:** Datos pasados no garantizan resultados futuros.

### Matriz de Correlaci√≥n

**¬øQu√© mide?** C√≥mo se mueven los activos entre s√≠.

- **+1.0:** Se mueven juntos (mala diversificaci√≥n)
- **0.0:** Independientes (buena diversificaci√≥n)
- **-1.0:** Opuestos (excelente diversificaci√≥n)

---

## üîß API Python

### Instalaci√≥n

```bash
pip install -r requirements.txt
```

**Dependencias:**
- numpy >= 1.21.0
- pandas >= 1.3.0
- scipy >= 1.7.0
- matplotlib >= 3.4.0
- yfinance >= 0.2.0

### Uso B√°sico

```python
from finean import PortfolioOptimizer
from finean.utils import calculate_returns
import yfinance as yf

# 1. Descargar datos
data = yf.download(['AAPL', 'MSFT', 'GOOGL'], period='2y')
prices = data['Close']

# 2. Calcular retornos y m√©tricas
returns = calculate_returns(prices)
expected_returns = returns.mean() * 252
cov_matrix = returns.cov() * 252

# 3. Optimizar
optimizer = PortfolioOptimizer(
    expected_returns=expected_returns,
    covariance_matrix=cov_matrix,
    risk_free_rate=0.04
)

# 4. Obtener portafolio √≥ptimo
result = optimizer.optimize_max_sharpe()

print(f"Pesos: {result['weights']}")
print(f"Sharpe: {result['sharpe_ratio']:.2f}")
```

### Estrategias de Optimizaci√≥n

```python
# 1. M√°ximo Sharpe Ratio (mejor retorno ajustado por riesgo)
max_sharpe = optimizer.optimize_max_sharpe()

# 2. M√≠nima Volatilidad (menor riesgo)
min_vol = optimizer.optimize_min_volatility()

# 3. M√°ximo Retorno (sin considerar riesgo - agresivo)
max_return = optimizer.optimize_max_return()

# 4. M√°ximo retorno para un riesgo objetivo
target = optimizer.optimize_max_return_for_risk(target_volatility=0.15)

# 5. Frontera eficiente
frontier = optimizer.calculate_efficient_frontier(n_points=100)
```

### Restricciones

```python
constraints = {
    'min_weight': 0.05,  # M√≠nimo 5% por activo
    'max_weight': 0.30,  # M√°ximo 30% por activo
    'long_only': True    # No short selling
}

result = optimizer.optimize_max_sharpe(constraints=constraints)
```

### Utilidades Financieras

```python
from finean.utils import (
    calculate_returns,
    calculate_volatility,
    calculate_sharpe_ratio,
    calculate_covariance_matrix
)

# Calcular retornos
returns = calculate_returns(prices, method='simple')

# Calcular volatilidad
vol = calculate_volatility(returns, annualize=True)

# Calcular Sharpe Ratio
sharpe = calculate_sharpe_ratio(returns, risk_free_rate=0.04)

# Matriz de covarianza
cov = calculate_covariance_matrix(returns, annualize=True)
```

### Predicci√≥n de Series Temporales

```python
from finean import TimeSeriesPredictor

# Crear predictor
predictor = TimeSeriesPredictor(method='ewma')

# Entrenar con datos hist√≥ricos
predictor.fit(returns, span=60)

# Predecir retornos y covarianza
predictions = predictor.get_predictions(annualize=True)
expected_returns = predictions['returns']
cov_matrix = predictions['covariance']
```

---

## üí° Tips y Buenas Pr√°cticas

### ‚úÖ Hacer

1. **Diversificar:** Usa activos de diferentes sectores
2. **Datos suficientes:** M√≠nimo 2 a√±os de historia
3. **Revisar correlaciones:** Busca activos poco correlacionados
4. **Reoptimizar:** Cada 3-6 meses
5. **Considerar costos:** Comisiones, impuestos, etc.

### ‚ùå Evitar

1. **Solo un sector:** No pongas todo en tech/finanzas/etc.
2. **Datos insuficientes:** Menos de 1 a√±o no es representativo
3. **Perseguir retornos:** Alto retorno pasado ‚â† futuro garantizado
4. **Ignorar advertencias:** El optimizador te avisa de problemas
5. **Invertir sin asesor√≠a:** Esto es educativo, no asesor√≠a financiera

### üéØ Portafolios Recomendados por Perfil

#### Conservador üõ°Ô∏è
```python
TICKERS = ['BIL', 'AGG', 'GLD', 'SPY']
MAX_WEIGHT = 0.40
```
Objetivo: Preservar capital, bajo riesgo.

#### Moderado ‚öñÔ∏è
```python
TICKERS = ['SPY', 'QQQ', 'AGG', 'GLD', 'VTI']
MAX_WEIGHT = 0.35
```
Objetivo: Balance entre crecimiento y estabilidad.

#### Agresivo üöÄ
```python
TICKERS = ['AAPL', 'MSFT', 'GOOGL', 'TSLA', 'NVDA']
MAX_WEIGHT = 0.40
```
Objetivo: M√°ximo crecimiento, aceptando alta volatilidad.

---

## ‚ùì FAQ

### ¬øEs esto asesor√≠a financiera?

**No.** Este proyecto es **solo educativo**. No inviertas sin consultar a un profesional.

### ¬øLos retornos son garantizados?

**No.** Los resultados se basan en datos hist√≥ricos. El pasado no predice el futuro.

### ¬øQu√© significa "Optimizaci√≥n no convergi√≥"?

El algoritmo tuvo problemas. Soluciones:
- Aumenta el periodo de datos (`PERIOD = '5y'`)
- Ajusta restricciones (aumenta `MAX_WEIGHT`)
- Reduce n√∫mero de activos

### ¬øPor qu√© un activo tiene peso 0%?

El optimizador decidi√≥ que no mejora el portafolio. Esto es normal y esperado.

### ¬øPuedo usar con datos propios?

S√≠. Usa la API Python con tus propios DataFrames de precios.

### ¬øFunciona con criptomonedas?

S√≠, usa tickers como `BTC-USD`, `ETH-USD`, etc.

### ¬øIncluye costos de transacci√≥n?

No. Los c√°lculos son te√≥ricos. En la pr√°ctica considera:
- Comisiones de compra/venta
- Impuestos sobre ganancias
- Spreads bid-ask
- Costos de rebalanceo

### ¬øCada cu√°nto debo reoptimizar?

Recomendado: cada 3-6 meses, o cuando cambien tus objetivos.

---

## üìö Recursos

### Documentaci√≥n

- **README.md** (este archivo) - Gu√≠a completa
- **examples/** - Ejemplos de uso de la biblioteca
- **tests/** - Suite de tests

### Teor√≠a

- [Modern Portfolio Theory](https://en.wikipedia.org/wiki/Modern_portfolio_theory) - Teor√≠a base
- [Sharpe Ratio](https://www.investopedia.com/terms/s/sharperatio.asp) - Explicaci√≥n del ratio de Sharpe
- [Efficient Frontier](https://www.investopedia.com/terms/e/efficientfrontier.asp) - Frontera eficiente

### Herramientas

- [Yahoo Finance](https://finance.yahoo.com/) - Buscar tickers
- [ETF Database](https://etfdb.com/) - Informaci√≥n de ETFs
- [Portfolio Visualizer](https://www.portfoliovisualizer.com/) - An√°lisis complementario

### Libros Recomendados

- "A Random Walk Down Wall Street" - Burton Malkiel
- "The Intelligent Investor" - Benjamin Graham
- "Common Sense on Mutual Funds" - John Bogle

---

## üî¨ Tests

Ejecutar suite de tests:

```bash
python -m unittest discover tests -v
```

Los tests cubren:
- Utilidades financieras
- Optimizaci√≥n de portafolios
- Predicci√≥n de series temporales

---

## üìù Licencia

MIT License - Ver [LICENSE](LICENSE)

---

## ü§ù Contribuir

¬øEncontraste un bug o tienes una sugerencia?

1. Abre un **Issue** describiendo el problema
2. O haz un **Pull Request** con tu soluci√≥n

---

## ‚ö†Ô∏è Disclaimers

### Riesgo de Inversi√≥n

Las inversiones en el mercado de valores conllevan riesgos. Puedes perder parte o todo tu capital. Esta herramienta:

- ‚ùå **NO** es asesor√≠a financiera
- ‚ùå **NO** garantiza resultados
- ‚ùå **NO** reemplaza a un asesor profesional
- ‚úÖ **ES** solo educativa
- ‚úÖ **ES** para aprender sobre optimizaci√≥n
- ‚úÖ **ES** un punto de partida para an√°lisis

### Limitaciones del Modelo

- Asume distribuci√≥n normal de retornos (no siempre cierto)
- No considera eventos extremos ("cisnes negros")
- Asume correlaciones constantes (cambian con el tiempo)
- No incluye costos de transacci√≥n
- Basado en datos hist√≥ricos (pasado ‚â† futuro)

### Uso Responsable

Antes de invertir:

1. ‚úÖ Consulta con un asesor financiero certificado
2. ‚úÖ Entiende tu tolerancia al riesgo
3. ‚úÖ Considera tu horizonte temporal
4. ‚úÖ Diversifica adecuadamente
5. ‚úÖ Ten un plan de inversi√≥n claro

---

## üìß Contacto

**Proyecto:** [github.com/eanorambuena/finean](https://github.com/eanorambuena/finean)

---

<div align="center">

**¬°Gracias por usar Finean! üìàüí∞**

Si te result√≥ √∫til, considera darle una ‚≠ê en GitHub

</div>
